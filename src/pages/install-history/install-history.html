<!--
  Generated template for the InstallHistoryPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button class="back-button disable-hover bar-button bar-button-ios back-button-ios bar-button-default bar-button-default-ios show-back-button"
      ion-button="bar-button" ng-reflect-klass="back-button" ng-reflect-ng-class="back-button-ios" style="" (click)="goToIndexPage()"><span class="button-inner">
        <ion-icon class="back-button-icon icon icon-ios back-button-icon-ios ion-ios-arrow-back" role="img"
          ng-reflect-klass="back-button-icon" ng-reflect-ng-class="back-button-icon-ios" aria-label="arrow back"
          ng-reflect-name="ios-arrow-back"></ion-icon><span class="back-button-text back-button-text-ios" ng-reflect-klass="back-button-text"
          ng-reflect-ng-class="back-button-text-ios" style="transform: translateX(0px);" >Back</span>
      </span>
      <div class="button-effect"></div>
    </button>
    <ion-title>历史记录</ion-title>
  </ion-navbar>
  <div class="search-box">
    <input type="text" placeholder="请输入设备编号" class="form-control-input" [(ngModel)]="queryStr" [ngModelOptions]="{standalone: true}" />
    <button ion-button small class="form-control-search-btn" (click)="searchHistory(queryStr)">
      <ion-icon ios="ios-search" md="md-search"></ion-icon>
    </button>
  </div>

</ion-header>


<ion-content padding >
  <div class="hei-{{platform}}"></div>

  <ion-card *ngFor="let item of historyList;let index = index" (click)="goToDevicePositionPage(item.deviceName, item.modelId, item.modelName)">
  
    <ion-card-header>
      {{item.deviceDescription}}
    </ion-card-header>
  
    <ion-card-content>
          <div class="wrap">
            <label for="序号">序号:</label>
            <span>{{index + 1}}</span>
          </div>
          <div class="wrap">
            <label for="时间">时间:</label>
            <span>{{item.time| date: 'yyyy-MM-ddTHH:mm'}}</span>
          </div>
          <!-- <div class="wrap">
            <label for="设备">设备:</label>
            <span>{{"deviceName"}}</span>
          </div> -->
          <div class="wrap">
            <label for="编号">设备编号:</label>
            <span>{{item.deviceName}}</span>
          </div>
          <div class="wrap">
            <label for="型号">设备型号:</label>
            <span>{{item.modelName}}</span>
          </div>
          <div class="wrap">
            <label for="安装点">安装点:</label>
            <span>{{item.positionName}}</span>
          </div>
    </ion-card-content>
  
  </ion-card>
  <!-- 滚动条触发事件 -->
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" immediate-check="false">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>


</ion-content>
